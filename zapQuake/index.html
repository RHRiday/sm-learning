<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>

      <label>Choose a building:</label>
      <select id="defense" onchange="calc(this)">
        <option></option>
        <option value="1210">Air Defense lvl8</option>
        <option value="1300">Air Defense lvl9</option>
        <option value="1400">Air Defense lvl10</option>
        <option value="1500">Air Defense lvl11</option>
        <option value="3400">Clan Castle lvl6</option>
        <option value="4000">Clan Castle lvl7</option>
        <option value="4400">Clan Castle lvl8</option>
        <option value="4800">Clan Castle lvl9</option>
        <option value="4000">Eagle Artillery lvl1</option>
        <option value="4400">Eagle Artillery lvl2</option>
        <option value="4800">Eagle Artillery lvl3</option>
        <option value="5200">Eagle Artillery lvl4</option>
        <option value="1500">Inferno Tower lvl1</option>
        <option value="1800">Inferno Tower lvl2</option>
        <option value="2100">Inferno Tower lvl3</option>
        <option value="2400">Inferno Tower lvl4</option>
        <option value="2700">Inferno Tower lvl5</option>
        <option value="3000">Inferno Tower lvl6</option>
        <option value="3300">Inferno Tower lvl7</option>
        <option value="3000">Scattershot lvl1</option>
        <option value="3500">Scattershot lvl2</option>
        <option value="1500">X-Bow lvl1</option>
        <option value="1900">X-Bow lvl2</option>
        <option value="2300">X-Bow lvl3</option>
        <option value="2700">X-Bow lvl4</option>
        <option value="3100">X-Bow lvl5</option>
        <option value="3500">X-Bow lvl6</option>
        <option value="3900">X-Bow lvl7</option>
      </select>

      <p id="result"></p>
      <table border="1" id="table" hidden>
        <!-- <tr>
          <th colspan="2">Lightning Spell</th>
          <th colspan="2">Earthquake Spell</th>
        </tr>
        <tr>
          <th>Level</th>
          <th>Required</th>
          <th>Level</th>
          <th>Required</th>
        </tr> -->
      </table>

      <script type="text/javascript">
       function calc(c){
         var hp = parseFloat(c.value)
         name = c.options[c.selectedIndex].text

         var light = new Array(400, 480, 580)
         var eq = new Array(0.17, 0.21, 0.25, 0.29)

        document.querySelector('#table').hidden = false;
         document.querySelector('#result').innerHTML = "<h2>Building: " +name+ "</h2><hr>";
         //cc = 1 - light


          var tr = `<tr>
                    <th colspan="2">Lightning Spell</th>
                    <th colspan="2">Earthquake Spell</th>
                  </tr>
                  <tr>
                    <th>Level</th>
                    <th>Required</th>
                    <th>Level</th>
                    <th>Required</th>
                  </tr>`;

         for(i=0; i<3; i++){
           for(j=0; j<4; j++){
             if (hp*eq[j]>light[i]) {
               ls = Math.ceil((hp-hp*eq[j])/light[i]);
               l_lvl = i+7;
               e_lvl = j+2;

               tr = tr + `<tr><td>` +l_lvl+ `</td>
                    <td>x ` +ls+`</td>
                    <td>` +e_lvl+`</td>
                    <td bgcolor="green">x 1</td></tr>`;

               // tr = document.createElement('tr')
               // td1 = document.createElement('td')
               // td1.innerHTML = l_lvl;
               // td2 = document.createElement('td')
               // td2.innerHTML = "x " +ls;
               // td3 = document.createElement('td')
               // td3.innerHTML = e_lvl;
               // td4 = document.createElement('td')
               // td4.innerHTML = "x 1";
               //
               // document.querySelector('#table').appendChild(tr);
               // document.querySelector('#table').appendChild(td1);
               // document.querySelector('#table').appendChild(td2);
               // document.querySelector('#table').appendChild(td3);
               // document.querySelector('#table').appendChild(td4);
             }else {
               ls = Math.ceil(hp/light[i])
               l_lvl = i+7;
               e_lvl = j+2;

               tr = tr + `<tr><td>` +l_lvl+ `</td>
                    <td>x ` +ls+`</td>
                    <td>` +e_lvl+`</td>
                    <td>x 0</td></tr>`;


               // tr = document.createElement('tr')
               // td1 = document.createElement('td')
               // td1.innerHTML = l_lvl;
               // td2 = document.createElement('td')
               // td2.innerHTML = "x " +ls;
               // td3 = document.createElement('td')
               // td3.innerHTML = e_lvl;
               // td4 = document.createElement('td')
               // td4.innerHTML = "x 0";
               //
               // document.querySelector('#table').appendChild(tr);
               // document.querySelector('#table').appendChild(td1);
               // document.querySelector('#table').appendChild(td2);
               // document.querySelector('#table').appendChild(td3);
               // document.querySelector('#table').appendChild(td4);
             }
           }
         }
         document.querySelector('#table').innerHTML = tr;
       }
      </script>
  </body>
</html>
